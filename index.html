<!DOCTYPE html>
<html lang="pl">
<head>

  <link rel="preload" as="image" href="tlo2.webp" fetchpriority="high">

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zabudo.pl - Wszystko zaczyna się od marzenia</title>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Zabudo.pl",
    "description": "Budynki gospodarcze na wymiar – hale stalowe, wiaty, garaże blaszane, konstrukcje rolnicze. Montaż Śląsk i Małopolska.",
    "url": "https://www.zabudo.pl",
    "telephone": "+48503702467",
    "email": "adam@zabudo.pl",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "ul. Parkowa 20",
      "addressLocality": "Siewierz",
      "addressRegion": "Śląskie",
      "postalCode": "42-470",
      "addressCountry": "PL"
    },
    "areaServed": ["Śląsk", "Małopolska", "Siewierz", "Zawiercie", "Myszków", "Łazy", "Poręba", "Żarki", "Koziegłowy", "Ożarowice", "Wojkowice Kościelne"],
    "openingHours": "Mo-Fr 08:00-16:00",
    "sameAs": []
  }
  </script>

  <meta name="description" content="Wyznaczamy standardy w budownictwie. Szybka realizacja, montaż i atrakcyjne ceny.">
  <meta name="keywords" content="budynki gospodarcze, domki letniskowe, wiaty, altany, konstrukcje drewniane, Śląsk, Małopolska, Siewierz, budowa, montaż, solidne budynki, na wymiar, blaszaki, Zabudo.pl">
  <meta name="author" content="Zabudo.pl">
  <meta name="robots" content="index, follow">
  <meta property="og:title" content="Zabudo.pl | Wszystko zaczyna się od marzenia">
  <meta property="og:description" content="Budowa i montaż budynków gospodarczych dopasowanych do Twoich potrzeb. Działamy na Śląsku i w Małopolsce.">
  <meta property="og:image" content="tlo.webp">
  <meta property="og:url" content="https://www.zabudo.pl">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />

  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">
  
  <style>
    :root {
      --zabudo-burgund: #b33434;
      --zabudo-akcent: #8a4f27;
      --bg-light-soft: #f8f6f3;
      --font-heavy: 900;
      --white: #fff;
      --dark: #212529;
    }
    
    /* UNIFIKACJA HERO SCROLL */
    #hero {
        height: 100vh;
        position: relative;
        overflow-y: scroll;
        scroll-snap-type: y mandatory;
        -webkit-overflow-scrolling: touch;
        display: block !important;
        background-color: #000;
    }
    .video-screen {
        scroll-snap-align: start;
        height: 100vh;
        position: relative;
        width: 100%;
        overflow: hidden;
        background-color: #000;
    }
    .video-screen video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
    
    /* Przycisk odmutowania */
    .unmute-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 20;
        background: rgba(0, 0, 0, 0.4);
        border: 2px solid rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        width: 80px;
        height: 80px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: background 0.3s, transform 0.3s;
        animation: pulse-btn 2s infinite;
    }
    .unmute-btn img {
        width: 35px;
        height: 35px;
        pointer-events: none;
    }
    .unmute-btn:hover {
        background: var(--zabudo-burgund);
        border-color: var(--zabudo-burgund);
        transform: translate(-50%, -50%) scale(1.1);
    }

    /* Animowane strzałki przewijania */
    .scroll-hint {
        position: absolute;
        bottom: 100px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 15;
        opacity: 0;
        transition: opacity 0.5s ease-in-out;
        pointer-events: none;
    }
    .scroll-hint.visible {
        opacity: 1;
    }
    .scroll-hint span {
        display: block;
        width: 30px;
        height: 30px;
        border-bottom: 3px solid rgba(255, 255, 255, 0.8);
        border-right: 3px solid rgba(255, 255, 255, 0.8);
        transform: rotate(45deg);
        margin: -10px auto;
        animation: scroll-anim 2s infinite;
    }
    .scroll-hint span:nth-child(2) { animation-delay: -0.2s; }
    .scroll-hint span:nth-child(3) { animation-delay: -0.4s; }

    @keyframes scroll-anim {
        0% { opacity: 0; transform: rotate(45deg) translate(-20px, -20px); }
        50% { opacity: 1; }
        100% { opacity: 0; transform: rotate(45deg) translate(20px, 20px); }
    }
    
    @keyframes pulse-btn {
        0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.4); }
        70% { box-shadow: 0 0 0 15px rgba(255, 255, 255, 0); }
        100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
    }

    /* Usunięcie elementów desktopowych (w tle) i mobilnych (kontenera) */
    #heroVideoDesktop { display: none !important; } 
    #heroVideosMobile { 
        display: block !important;
        overflow: visible !important;
        position: static !important;
        height: auto !important;
        width: 100% !important;
    }
    
    /* Zachowanie stylów Lightboxa i Galerii */
    .bg-light-soft { background-color: var(--bg-light-soft) !important; }
    .lead-text-bold { font-weight: var(--font-heavy); font-size: 1.15rem; color: var(--dark); }
    .section-title { color: var(--zabudo-akcent); font-weight: var(--font-heavy); }
    .asymetric-gallery {
      display: grid; grid-template-columns: repeat(4, 1fr); grid-auto-rows: minmax(auto, 1fr); 
      gap: 15px; max-width: 1200px; margin: 0 auto;
    }
    .gallery-card { position: relative; overflow: hidden; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); transition: transform 0.3s ease, box-shadow 0.3s ease; aspect-ratio: 1 / 1; display: block; cursor: pointer; }
    .gallery-card.large { grid-column: span 2; grid-row: span 2; aspect-ratio: 1 / 1; }
    .gallery-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(179, 52, 52, 0.4), 0 0 0 3px var(--zabudo-burgund); }
    .gallery-card img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
    .card-overlay { position: absolute; inset: 0; background: rgba(179, 52, 52, 0.65); color: var(--white); display: flex; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s ease; padding: 15px; text-align: center; }
    .gallery-card:hover .card-overlay { opacity: 1; }
    .card-overlay span { font-weight: var(--font-heavy); font-size: 1.1rem; }
    .btn-cta { font-weight: var(--font-heavy) !important; background-color: var(--zabudo-burgund); border-color: var(--zabudo-burgund); }
    
    /* --- LIGHTBOX POPRAWKI --- */
    .dog-lightbox { background: rgba(0, 0, 0, 0.95) !important; z-index: 99999; }
    .dog-lightbox-close { color: var(--white); top: 40px; right: 50px; font-size: 50px; font-weight: 300; opacity: 0.8; }
    .dog-lightbox-close:hover { color: var(--zabudo-burgund) !important; transform: scale(1.1); opacity: 1; }
    
    .lightbox-info { 
        text-align: center; 
        color: var(--white); 
        margin-bottom: 15px; 
        width: 100%; 
        max-width: 800px; 
        padding: 0 20px;
        word-wrap: break-word;
    }
    #lightbox-title { 
        font-weight: var(--font-heavy); 
        color: var(--white); 
        font-size: 2rem; 
        margin-bottom: 10px;
        word-wrap: break-word;
    }
    #lightbox-desc { 
        font-weight: 400; 
        color: #ccc; 
        word-wrap: break-word;
    }
    
    .dog-lightbox-main img { max-height: 60vh; box-shadow: 0 0 40px rgba(0, 0, 0, 0.5); object-fit: contain; }
    
    /* Poprawka dla miniatur - Przewijanie poziome bez paska */
    .dog-lightbox-thumbs {
        display: flex;
        gap: 10px;
        justify-content: flex-start; /* Ważne dla scrollowania */
        flex-wrap: nowrap; /* Nie zawijaj - jedna linia */
        overflow-x: auto; /* Pozwól na scrollowanie */
        width: 100%;
        max-width: 800px; /* Ograniczenie szerokości */
        padding: 10px 0;
        margin-top: 15px;
        
        /* Ukrycie suwaka (Scrollbar) */
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    /* Ukrycie suwaka dla Chrome, Safari i Opera */
    .dog-lightbox-thumbs::-webkit-scrollbar {
        display: none;
    }

    .dog-lightbox-thumbs img { 
        width: 80px; 
        height: 80px; 
        object-fit: cover; 
        border: 2px solid transparent; 
        border-radius: 5px; 
        opacity: 0.6; 
        cursor: pointer;
        transition: 0.3s;
        flex-shrink: 0; /* Zapobiega ściskaniu miniatur */
    }
    .dog-lightbox-thumbs img.active { 
        border-color: var(--zabudo-burgund); 
        opacity: 1; 
        transform: scale(1.1); 
    }
    
    @media (max-width: 768px) {
      .asymetric-gallery { grid-template-columns: repeat(2, 1fr); }
      .gallery-card.large { grid-column: span 1; grid-row: span 1; }
      #lightbox-title { font-size: 1.5rem; }
      .dog-lightbox-close { top: 20px; right: 20px; }
      /* Na mobile centrujemy start miniatur */
      .dog-lightbox-thumbs { justify-content: flex-start; }
    }
  </style>
  
</head>

<body>


<script>
document.addEventListener('DOMContentLoaded', () => {
  const nav  = document.querySelector('#navbar');
  const hero = document.querySelector('#hero');
  if (!nav || !hero) return;

  const update = () => {
    const isPastHero = window.scrollY > 50; 
    nav.classList.toggle('white', isPastHero);
  };
  
  window.addEventListener('scroll', update, { passive: true });
  window.addEventListener('resize', update);
  window.addEventListener('load', update);
  update();

  document.querySelector('.navbar-toggler')?.classList.add('collapsed');
});
</script>


  <nav id="navbar" class="navbar navbar-expand-lg fixed-top">
    <div class="container">
     <a href="#"> <img id="ikonazab" src="logo_zabudo_white.webp" alt="Logo białe"   /></a>
      <a href="#"> <img id="ikonablack" src="logo_zabudo_black.webp" alt="Logo czarne"  /></a>

      <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <div class="line"></div>
        <div class="line"></div>
        <div class="line"></div>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
           <li class="nav-item"><a class="nav-link" href="#proces">Nasz proces</a></li>
          <li class="nav-item"><a class="nav-link" href="#oferta">Oferta</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Kontakt</a></li>

        </ul>
      </div>
    </div>
  </nav>


<section id="hero" class="text-center"> 
  
  <div id="heroVideosMobile"> 
    <div class="video-screen">
      <video src="/Spoty/Spot1vert.webm" muted playsinline preload="metadata"></video>
      <button class="unmute-btn" title="Włącz dźwięk">
        <img src="/Ikony/muted.webp" alt="Włącz dźwięk">
      </button>
      <div class="scroll-hint">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <div class="video-screen">
      <video src="/Spoty/Spot2vert.webm" muted playsinline preload="metadata"></video>
      <button class="unmute-btn" title="Włącz dźwięk">
        <img src="/Ikony/muted.webp" alt="Włącz dźwięk">
      </button>
      <div class="scroll-hint">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <div class="video-screen">
      <video src="/Spoty/Spot3vert.webm" muted playsinline preload="metadata"></video>
      <button class="unmute-btn" title="Włącz dźwięk">
        <img src="/Ikony/muted.webp" alt="Włącz dźwięk">
      </button>
      <div class="scroll-hint">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>

    <div class="video-screen">
      <video src="/Spoty/Spot4vert.webm" muted playsinline preload="metadata"></video>
      <button class="unmute-btn" title="Włącz dźwięk">
        <img src="/Ikony/muted.webp" alt="Włącz dźwięk">
      </button>
      <div class="scroll-hint">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

</section>


<script>
document.addEventListener("DOMContentLoaded", function() {
  
  const mobileScreens = document.querySelectorAll('.video-screen');
  const muteButtons = document.querySelectorAll('.unmute-btn');
  const heroContainer = document.getElementById('hero');
  let currentPlayingVideo = null; 

  // Definicje plików
  const desktopFilms = [
    "/Spoty/Spot1.webm", "/Spoty/Spot2.webm", "/Spoty/Spot3.webm", "/Spoty/Spot4.webm"
  ];
  const mobileFilms = [
    "/Spoty/Spot1vert.webm", "/Spoty/Spot2vert.webm", "/Spoty/Spot3vert.webm", "/Spoty/Spot4vert.webm"
  ];

  // Inicjalizacja Wideo
  const isDesktopFormat = window.innerWidth >= 768;
  const filmList = isDesktopFormat ? desktopFilms : mobileFilms;

  mobileScreens.forEach((screen, index) => {
      const video = screen.querySelector('video');
      const hint = screen.querySelector('.scroll-hint');

      if (video && index < filmList.length) {
          video.src = filmList[index];
          video.removeAttribute('loop'); 
          video.preload = index === 0 ? 'auto' : 'metadata'; 
          
          video.addEventListener('ended', () => {
            if (hint) hint.classList.add('visible');
          });

          video.addEventListener('play', () => {
             if (hint) hint.classList.remove('visible');
          });
      }
  });

  // Odpalamy pierwsze wideo
  const firstVideo = mobileScreens[0].querySelector('video');
  if (firstVideo) {
      firstVideo.muted = true; 
      firstVideo.play().catch(()=>{});
  }


  // FUNKCJA ODŁUCHU WSZYSTKICH WIDEO
  function unmuteAllVideos() {
    mobileScreens.forEach(screen => {
      const video = screen.querySelector('video');
      if(video){ 
        video.muted = false; 
        video.volume = 1; 
      }
    });

    muteButtons.forEach(btn => {
        btn.style.display = 'none';
    });
    
    if (currentPlayingVideo) {
         currentPlayingVideo.play().catch(()=>{});
    }
  }

  muteButtons.forEach(btn => {
      btn.addEventListener('click', (e) => {
          e.stopPropagation(); 
          unmuteAllVideos();
      });
  });


  // INTERSECTION OBSERVER
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const video = entry.target.querySelector('video');
      if(!video) return;

      if(entry.isIntersecting){
        currentPlayingVideo = video; 
        
        video.play().catch(e => console.log("Autoplay blocked or waiting for interaction", e));
        
        const nextScreen = entry.target.nextElementSibling;
        if (nextScreen && nextScreen.classList.contains('video-screen')) {
            const nextVideo = nextScreen.querySelector('video');
            if (nextVideo && nextVideo.preload !== 'auto') {
                nextVideo.preload = 'auto'; 
            }
        }

      } else {
        video.pause();
        const hint = entry.target.querySelector('.scroll-hint');
        if (hint) hint.classList.remove('visible');

        if (currentPlayingVideo === video) {
             currentPlayingVideo = null;
        }
      }
    });
  }, {threshold: 0.5, root: heroContainer}); 

  mobileScreens.forEach(screen => observer.observe(screen));

});
</script>


  <section class="py-5 bg-light" id="proces">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-3 text-center">
          <i class="fa-solid fa-pencil-ruler fa-3x ikona-zalety text-primary mb-3"></i>
          <h5>Projekt</h5>
          <p></p>
        </div>
        <div class="col-md-3 text-center">
          <i class="fa-solid fa-lightbulb fa-3x ikona-zalety text-primary mb-3"></i>
          <h5>Koncepcja</h5>
          <p></p>
        </div>
        <div class="col-md-3 text-center">
          <i class="fa-solid fa-hammer fa-3x ikona-zalety text-primary mb-3"></i>
          <h5>Budowa</h5>
          <p></p>
        </div>
        <div class="col-md-3 text-center">
          <i class="fa-solid fa-credit-card fa-3x ikona-zalety text-primary mb-3"></i>
          <h5>Płatności</h5>
          <p></p>
        </div>
      </div>
    </div>
  </section>


<script>
// Skrypt Lightbox/Oferta
(() => {
  const scope = document.getElementById('oferta');
  const lightbox = document.getElementById('dog-lightbox');
  const mainImg = document.getElementById('dog-lightbox-main-img');
  const thumbsBox = document.getElementById('dog-lightbox-thumbs');
  const content = lightbox ? lightbox.querySelector('.dog-lightbox-content') : null;
  const closeX = lightbox ? lightbox.querySelector('.dog-lightbox-close') : null;
  const titleEl = document.getElementById('lightbox-title');
  const descEl = document.getElementById('lightbox-desc');
  const contactBtn = lightbox ? lightbox.querySelector('.lightbox-close-on-click') : null;

  if (!lightbox || !scope || !mainImg || !thumbsBox || !content) {
      console.warn("Lightbox: Nie znaleziono wszystkich wymaganych elementów.");
      return;
  }

  let gallery = [];
  let idx = 0;

  const toAbs = (src) => {
      const path = src.includes('/') || src.startsWith('http') ? src : ('/' + src);
      return new URL(path, location.href).href;
  };

  const getGalleryData = (card) => {
    const mainSrc = card.querySelector('img').src;
    let rawGallery = card.getAttribute('data-gallery');
    let images = [];
    
    if (rawGallery) {
      try { 
        let jsonStr = rawGallery.replace(/'/g, '"');
        images = JSON.parse(jsonStr).map(toAbs); 
      } catch (e) { 
        images = [toAbs(mainSrc)]; 
      }
    } else {
      images = [toAbs(mainSrc)];
    }

    if (!images.includes(toAbs(mainSrc))) { 
        images.unshift(toAbs(mainSrc)); 
    }

    return {
        images: images,
        title: card.getAttribute('data-title') || 'Nasza Realizacja',
        description: card.getAttribute('data-desc') || 'Brak dodatkowego opisu.',
        mainSrc: toAbs(mainSrc)
    };
  };

  const setActive = (i) => {
    idx = i;
    mainImg.src = gallery[idx];
    
    const thumbs = Array.from(thumbsBox.children);
    thumbs.forEach((t, k) => {
        if (k === idx) {
            t.classList.add('active');
            t.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        } else {
            t.classList.remove('active');
        }
    });
  };

  const renderThumbs = () => {
    thumbsBox.innerHTML = '';
    if (gallery.length > 1) {
        gallery.forEach((src, i) => {
          const t = document.createElement('img');
          t.src = src; 
          t.alt = `miniatura ${i+1}`;
          if (i === idx) t.classList.add('active');
          t.onclick = (e) => { e.stopPropagation(); setActive(i); }; 
          thumbsBox.appendChild(t);
        });
    }
  };

  const openLightbox = (data) => {
    gallery = data.images;
    const start = data.images.findIndex(url => url === data.mainSrc);
    idx = start !== -1 ? start : 0;

    if (titleEl) titleEl.textContent = data.title;
    if (descEl) descEl.textContent = data.description;
    
    renderThumbs(); 
    setActive(idx);
    
    lightbox.style.display = 'flex';
    document.documentElement.style.overflow = 'hidden';
  };

  const closeLightbox = () => {
    lightbox.style.display = 'none';
    document.documentElement.style.overflow = '';
  };
  
  if (closeX) closeX.addEventListener('click', (e) => { e.stopPropagation(); closeLightbox(); });
  lightbox.addEventListener('click', () => closeLightbox());
  if (content) content.addEventListener('click', (e) => e.stopPropagation()); 
  
  if (contactBtn) contactBtn.addEventListener('click', () => { 
    setTimeout(closeLightbox, 100); 
  });

  scope.addEventListener('click', (e) => {
    const card = e.target.closest('.gallery-card');
    if (!card) return;

    const data = getGalleryData(card);
    if (!data.images.length) return;

    openLightbox(data);
  });
  
  document.addEventListener('keydown', (e) => {
    if (lightbox.style.display === 'none') return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowRight' && gallery.length > 1) setActive((idx + 1) % gallery.length);
    if (e.key === 'ArrowLeft'  && gallery.length > 1) setActive((idx - 1 + gallery.length) % gallery.length);
  });
})();
</script>

<section id="oferta" class="py-5 bg-light-soft">
  <div class="container">
    <h2 class="section-title">Wszystko zaczyna się od marzenia</h2>
    <p class="lead-text-bold text-center mb-5">
      Całoroczne domy szkieletowe – spełniamy ekskluzywne marzenia.
    </p>

    <div class="asymetric-gallery">
      
      <div class="gallery-card large" 
           data-title="Nowoczesna Harmonia" 
           data-desc="Idealne połączenie funkcjonalności z estetyką. Konstrukcja, która naturalnie wpisuje się w każdy krajobraz, zapewniając trwałość na lata.">
        <img src="/Wizualizacje/wiz1.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>
      
      <div class="gallery-card large" 
           data-title="Twój Prywatny Azyl" 
           data-desc="Przestrzeń zaprojektowana z myślą o spokoju i komforcie. Solidne wykonanie gwarantuje bezpieczeństwo, a design cieszy oko każdego dnia.">
        <img src="/Wizualizacje/wiz2.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>
      
      <div class="gallery-card large" 
           data-title="Skandynawska Prostota" 
           data-desc="Minimalistyczna forma, która kryje w sobie maksymalną użyteczność. To rozwiązanie dla tych, którzy cenią porządek i jasne, przestronne wnętrza.">
        <img src="/Wizualizacje/wiz3.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>
      
      <div class="gallery-card large" 
           data-title="Przestrzeń Możliwości" 
           data-desc="Uniwersalny projekt, który dostosowuje się do Twoich potrzeb. Niezależnie od przeznaczenia, ten budynek spełni swoje zadanie w 100%.">
        <img src="/Wizualizacje/wiz4.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>

      <div class="gallery-card small" 
           data-title="Solidna Baza" 
           data-desc="Konstrukcja oparta na sprawdzonych rozwiązaniach. Wytrzymałość i odporność na warunki atmosferyczne to fundament tego projektu.">
        <img src="/Wizualizacje/wiz5.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>

      <div class="gallery-card small" 
           data-title="Oaza Spokoju" 
           data-desc="Miejsce, w którym czas płynie wolniej. Ciepło naturalnego drewna i przemyślany układ tworzą atmosferę idealną do wypoczynku lub pracy.">
        <img src="/Wizualizacje/wiz6.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>

      <div class="gallery-card small" 
           data-title="Elegancja w Drewnie" 
           data-desc="Klasyczne piękno w nowoczesnym wydaniu. Ten budynek to dowód na to, że wysoka jakość wykonania jest najlepszą ozdobą ogrodu.">
        <img src="/Wizualizacje/wiz11.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>

      <div class="gallery-card small" 
           data-title="Komfort na Wymiar" 
           data-desc="Projekt stworzony, by ułatwiać życie. Ergonomiczne rozwiązania i precyzyjny montaż sprawiają, że korzystanie z niego to czysta przyjemność.">
        <img src="/Wizualizacje/wiz8.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>

      <div class="gallery-card small" 
            data-title="Leśna Inspiracja" 
            data-desc="Budynek, który oddycha w rytmie natury. Ekologiczne materiały i solidna konstrukcja szkieletowa zapewniają zdrowy mikroklimat.">
        <img src="/Wizualizacje/wiz9.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>

      <div class="gallery-card small" 
           data-title="Definicja Trwałości" 
           data-desc="Inwestycja, która procentuje. Bezkompromisowa jakość materiałów sprawia, że ten obiekt będzie służył kolejnym pokoleniom.">
        <img src="/Wizualizacje/wiz12.webp" alt="wizualizacja_dom_szkieletowy" loading="lazy">
        <div class="card-overlay"><span>KLIKNIJ, ABY ZOBACZYĆ WIĘCEJ.</span></div>
      </div>

    </div>

    <div class="offer-cta text-center mt-5">
      <a href="konfigurator.html" class="btn btn-cta" style="margin-bottom: 2%;">
        DO KONFIGURATORA! <i class="fa-solid fa-gears ms-2"></i>
      </a>
      
      <a href="#contact" class="scroll-down-prompt mt-4">
        <div class="p-3 bg-white shadow-sm contact-prompt-box">
           <p class="mb-0 lead-text-bold">Masz więcej pytań?</p>
           <p class="mb-0 small">Napisz do nas lub zadzwoń!</p>
        </div>
        <div class="animated-arrows-down">
          
        </div>
      </a>
    </div>

  </div>
</section>


<section id="contact" class="full-screen-section d-flex align-items-center justify-content-center text-center">
  <div class="container" style="max-width: 600px;">
    <h2 class="section-title">Skontaktuj się z nami</h2>

    <div class="footer-description">
      <p>Telefon: <a href="tel:+48503702467">+48 503 702 467</a> | <a href="tel:+48500156450">+48 500 156 450</a></p>
      <p>Email: <a href="mailto:adam@zabudo.pl">adam@zabudo.pl</a></p>
    </div>

    <form id="contact-form">
      <div class="mb-2">
        <input type="text" name="user_name" placeholder="Imię i nazwisko*" class="form-control" required />
      </div>
      <div class="mb-2">
        <input type="email" name="user_email" placeholder="Adres e-mail*" class="form-control" required />
      </div>
      
      <div class="mb-2">
        <input type="tel" name="phone" placeholder="Numer telefonu*" class="form-control" required />
      </div>
      <div class="mb-2">
        <input type="text" name="street_address" placeholder="Ulica i numer działki*" class="form-control" required />
      </div>
      <div class="mb-2">
        <input type="text" name="city" placeholder="Miejscowość*" class="form-control" required />
      </div>
      <div class="mb-2">
        <input type="text" name="postal_code" placeholder="Kod pocztowy*" class="form-control" required />
      </div>

      <div class="mb-2">
        <textarea id="message" name="message" rows="6" class="form-control" placeholder="Napisz swoją wiadomość*" required></textarea>
      </div>

      <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
      <div class="cf-turnstile"
           data-sitekey="0x4AAAAAAB5Dri7HbhagljpE"
           data-theme="light"
           data-language="pl"></div>

      <button type="submit" class="btn btn-primary">Wyślij wiadomość</button>
      <a href="tel:+48503702467" class="btn btn-primary">Zadzwoń teraz!</a>
    </form>

    <p id="form-message" style="margin-top: 10px;"></p>
  </div>
</section>


 <script>
(function() {

  function addHidden(form, name, value) {
    let input = form.querySelector('input[name="'+name+'"]');
    if (!input) {
      input = document.createElement('input');
      input.type = 'hidden';
      input.name = name;
      form.appendChild(input);
    }
    input.value = value;
  }
  
  function appendBuildConfigurationToMessage(form) { }

  function appendConsents(form) {
    let newsletterConsent = 'NIE', newsletterTs = '', newsletterSource = '';
    try {
      const meta = JSON.parse(localStorage.getItem('newsletterConsentMeta') || '{}');
      if (meta?.consent) { newsletterConsent = 'TAK'; newsletterTs = meta.ts || ''; newsletterSource = meta.source || ''; }
    } catch (e) {}

    let cookiesConsent = 'NIE';
    try {
      const cons = JSON.parse(localStorage.getItem('consents') || '{}');
      cookiesConsent = cons.cookies ? 'TAK' : 'NIE';
    } catch (e) {}

    addHidden(form, 'newsletter_consent', newsletterConsent);
    addHidden(form, 'newsletter_consent_ts', newsletterTs);
    addHidden(form, 'newsletter_consent_source', newsletterSource);
    addHidden(form, 'consent_cookies', cookiesConsent);
  }

  function wireContactForm(form, msgEl) {
    if (!form) return;
    const msg = msgEl || document.getElementById('form-message');

    if (form.__wired__) return;
    form.__wired__ = true;
    
    // Inicjalizacja EmailJS - PODMIEŃ KLUCZ TUTAJ
    emailjs.init("0rODOdXhUGV-z--Ya"); 

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const tokenInput = form.querySelector('input[name="cf-turnstile-response"]');
      if (!tokenInput || !tokenInput.value) {
        if (msg) { msg.textContent = 'Zaznacz zabezpieczenie (captcha).'; msg.style.color = 'red'; }
        return;
      }

      appendConsents(form);
      appendBuildConfigurationToMessage(form);

      const btn = form.querySelector('button[type="submit"]');
      const original = btn ? btn.innerHTML : '';
      if (btn) { btn.disabled = true; btn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Wysyłam…'; }

      // Wysyłka przez EmailJS
      // PODMIEŃ SERVICE ID i TEMPLATE ID TUTAJ
      emailjs.sendForm('service_yabzq3j', 'template_4s8ii9u', this)
        .then(function() {
            if (msg) { msg.textContent = 'Dziękujemy! Wiadomość wysłana.'; msg.style.color = 'green'; }
            form.reset();
            if (window.turnstile) turnstile.reset();
        }, function(error) {
            console.error('FAILED...', error);
            if (msg) { msg.textContent = 'Błąd wysyłki: ' + JSON.stringify(error); msg.style.color = 'red'; }
        })
        .finally(() => {
            if (btn) { btn.disabled = false; btn.innerHTML = original; }
        });
    });
  }

  document.addEventListener('DOMContentLoaded', function () {
    const pageForm = document.getElementById('contact-form');
    const pageMsg  = document.getElementById('form-message');
    if (pageForm) wireContactForm(pageForm, pageMsg);
  });
})();
</script>

<section class="py-5" id="opinie" style="display: none;">...</section>
  <section class="py-5" id="blog" style="display: none;">...</section>
  <section id="gallery" style="display: none;">...</section>

  <footer>
    <div class="container">
      <p>&copy; <span id="year"></span> Zabudo.pl</p>
      <p>NIP: 6252502129 | KRS: 0001194079</p>
      <div class="footer-description">
        <p>Telefon: <a href="tel:+48503702467">+48 503 702 467</a> | <a href="tel:+48500156450">+48 500 156 450</a></p>
        <p>Email: <a href="mailto:adam@zabudo.pl">adam@zabudo.pl</a></p>
        <a href="polityka-prywatności.html">Polityka prywatności</a> | <a href="regulamin-sprzedaży.html">Regulamin sprzedaży</a>
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <div id="cookie-banner" class="text-center" style="display:none;">
    Ta strona korzysta z plików cookies...
  </div>
  <script>
  
  function loadAnalytics() { ... }
  document.addEventListener('DOMContentLoaded', function() {
    
  });
  </script>

<div id="dog-lightbox" class="dog-lightbox">
  
  <div class="dog-lightbox-close">&times;</div>
  
  <div class="dog-lightbox-content">
    
    <div class="lightbox-info">
      <h3 id="lightbox-title">Tytuł Realizacji</h3>
      <p id="lightbox-desc">Opis techniczny projektu.</p>
    </div>

    <div class="dog-lightbox-main">
      <img id="dog-lightbox-main-img" src="" alt="Pełnoekranowa wizualizacja">
    </div>

    <div class="dog-lightbox-thumbs" id="dog-lightbox-thumbs">
        </div>

    <div class="lightbox-cta-buttons" style="display: flex; justify-content: center; align-items: center;">
      <a href="konfigurator.html" class="btn btn-lightbox btn-primary-custom">
        <i class="fa-solid fa-gears me-2"></i> PRZEJDŹ DO KONFIGURATORA
      </a>
      <a href="#contact" class="btn btn-lightbox btn-secondary-custom lightbox-close-on-click">
        <i class="fa-solid fa-phone me-2"></i> SKONTAKTUJ SIĘ
      </a>
    </div>


  </div>
</div>

<script>
(() => {
  const scope = document.getElementById('oferta');
  const lightbox = document.getElementById('dog-lightbox');
  const mainImg = document.getElementById('dog-lightbox-main-img');
  const thumbsBox = document.getElementById('dog-lightbox-thumbs'); // Przywrócono
  const content = lightbox ? lightbox.querySelector('.dog-lightbox-content') : null;
  const closeX = lightbox ? lightbox.querySelector('.dog-lightbox-close') : null;
  const titleEl = document.getElementById('lightbox-title');
  const descEl = document.getElementById('lightbox-desc');
  const contactBtn = lightbox ? lightbox.querySelector('.lightbox-close-on-click') : null;

  if (!lightbox || !scope || !mainImg || !thumbsBox || !content) {
      console.warn("Lightbox: Nie znaleziono wszystkich wymaganych elementów.");
      return;
  }

  let gallery = [];
  let idx = 0;

  const toAbs = (src) => {
      const path = src.includes('/') || src.startsWith('http') ? src : ('/' + src);
      return new URL(path, location.href).href;
  };

  const getGalleryData = (card) => {
    const mainSrc = card.querySelector('img').src;
    let rawGallery = card.getAttribute('data-gallery');
    let images = [];
    
    if (rawGallery) {
      try { 
        let jsonStr = rawGallery.replace(/'/g, '"');
        images = JSON.parse(jsonStr).map(toAbs); 
      } catch (e) { 
        images = [toAbs(mainSrc)]; 
      }
    } else {
      images = [toAbs(mainSrc)];
    }

    if (!images.includes(toAbs(mainSrc))) { 
        images.unshift(toAbs(mainSrc)); 
    }

    return {
        images: images,
        title: card.getAttribute('data-title') || 'Nasza Realizacja',
        description: card.getAttribute('data-desc') || 'Brak dodatkowego opisu.',
        mainSrc: toAbs(mainSrc)
    };
  };

  const setActive = (i) => {
    idx = i;
    mainImg.src = gallery[idx];
    
    // Aktualizacja klas i PRZEWIJANIE
    const thumbs = Array.from(thumbsBox.children);
    thumbs.forEach((t, k) => {
        if (k === idx) {
            t.classList.add('active');
            t.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
        } else {
            t.classList.remove('active');
        }
    });
  };

  const renderThumbs = () => {
    thumbsBox.innerHTML = '';
    if (gallery.length > 1) {
        gallery.forEach((src, i) => {
          const t = document.createElement('img');
          t.src = src; 
          t.alt = `miniatura ${i+1}`;
          if (i === idx) t.classList.add('active');
          t.onclick = (e) => { e.stopPropagation(); setActive(i); }; 
          thumbsBox.appendChild(t);
        });
    }
  };

  const openLightbox = (data) => {
    gallery = data.images;
    const start = data.images.findIndex(url => url === data.mainSrc);
    idx = start !== -1 ? start : 0;

    if (titleEl) titleEl.textContent = data.title;
    if (descEl) descEl.textContent = data.description;
    
    renderThumbs(); 
    setActive(idx);
    
    lightbox.style.display = 'flex';
    document.documentElement.style.overflow = 'hidden';
  };

  const closeLightbox = () => {
    lightbox.style.display = 'none';
    document.documentElement.style.overflow = '';
  };
  
  if (closeX) closeX.addEventListener('click', (e) => { e.stopPropagation(); closeLightbox(); });
  lightbox.addEventListener('click', () => closeLightbox());
  if (content) content.addEventListener('click', (e) => e.stopPropagation()); 
  
  if (contactBtn) contactBtn.addEventListener('click', () => { 
    setTimeout(closeLightbox, 100); 
  });

  scope.addEventListener('click', (e) => {
    const card = e.target.closest('.gallery-card');
    if (!card) return;

    const data = getGalleryData(card);
    if (!data.images.length) return;

    openLightbox(data);
  });
  
  document.addEventListener('keydown', (e) => {
    if (lightbox.style.display === 'none') return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowRight' && gallery.length > 1) setActive((idx + 1) % gallery.length);
    if (e.key === 'ArrowLeft'  && gallery.length > 1) setActive((idx - 1 + gallery.length) % gallery.length);
  });
})();
</script>

</body>
</html>